var De=Object.defineProperty;var $e=(t,c,p)=>c in t?De(t,c,{enumerable:!0,configurable:!0,writable:!0,value:p}):t[c]=p;var se=(t,c,p)=>($e(t,typeof c!="symbol"?c+"":c,p),p);import{I as de,d as ne,r as _,b as O,K as F,p as Te,e as xe,O as be,Q as he,F as q,w as ge,f as Ue,n as ee,i as Pe,o as b,c as j,m as ye,A as Ae,R as Ee,a as o,t as I,l as K,j as A,g as D,h as B,u as P,q as oe,S as we,x as X,U as je,k as Fe,V as Re,C as Be,y as Ne,W as Le,X as Me,Y as qe,T as ze,Z as Ve,J as Qe,P as W,M as _e}from"./index-73bbc3b3.js";import{r as Ke,n as Ge,S as He,_ as Xe}from"./HModal-4c7e36fe.js";import{_ as Se}from"./IndexSurvey-de516603.js";import{d as Ye,e as Je,_ as Ze,r as We,b as et,a as ve}from"./HSelect-5fb9bbf1.js";import{u as J,o as N,F as tt,c as at,l as ce,K as lt,H as re,T as ke,t as me,N as pe,p as ot,O as it,a as Q}from"./use-outside-click-21562e79.js";import{x as st,a as L,b as nt,u as rt}from"./use-text-value-fa5aae1f.js";import{p as ut}from"./use-tree-walker-68739561.js";import{f as dt,a as ct,_ as te}from"./InputForm-cfc6af7d.js";class Oe{constructor(){se(this,"getDepartamentos",async()=>(await de.get("https://service2.unap.edu.pe/SURVEY_PLACES/v1/departments/")).data.data);se(this,"getProvincias",async c=>(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/provinces/${c}/`)).data.data);se(this,"getDistritos",async c=>(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/districts/${c}/`)).data.data);se(this,"getUbigeo",async c=>{try{return(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/${c}/`)).data.data[0]}catch{return null}})}}function pt(t,c){return t===c}var vt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(vt||{}),mt=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(mt||{}),ft=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ft||{});let Ie=Symbol("ComboboxContext");function ue(t){let c=Pe(Ie,null);if(c===null){let p=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,ue),p}return c}let bt=ne({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pt},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:c,attrs:p,emit:g}){let l=_(1),a=_(null),d=_(null),v=_(null),s=_(null),f=_({static:!1,hold:!1}),m=_([]),w=_(null),$=_(1),E=_(!1);function h(r=u=>u){let u=w.value!==null?m.value[w.value]:null,e=it(r(m.value.slice()),S=>N(S.dataRef.domRef)),y=u?e.indexOf(u):null;return y===-1&&(y=null),{options:e,activeOptionIndex:y}}let x=O(()=>t.multiple?1:0),i=O(()=>t.nullable),[R,k]=Ye(O(()=>t.modelValue===void 0?J(x.value,{[1]:[],[0]:void 0}):t.modelValue),r=>g("update:modelValue",r),O(()=>t.defaultValue)),V={comboboxState:l,value:R,mode:x,compare(r,u){if(typeof t.by=="string"){let e=t.by;return(r==null?void 0:r[e])===(u==null?void 0:u[e])}return t.by(r,u)},defaultValue:O(()=>t.defaultValue),nullable:i,inputRef:d,labelRef:a,buttonRef:v,optionsRef:s,disabled:O(()=>t.disabled),options:m,change(r){k(r)},activeOptionIndex:O(()=>{if(E.value&&w.value===null&&m.value.length>0){let r=m.value.findIndex(u=>!u.dataRef.disabled);r!==-1&&(w.value=r)}return w.value}),activationTrigger:$,optionsPropsRef:f,closeCombobox(){E.value=!1,!t.disabled&&l.value!==1&&(l.value=1,w.value=null)},openCombobox(){if(E.value=!0,t.disabled||l.value===0)return;let r=m.value.findIndex(u=>{let e=F(u.dataRef.value);return J(x.value,{[0]:()=>V.compare(F(V.value.value),F(e)),[1]:()=>F(V.value.value).some(y=>V.compare(F(y),F(e)))})});r!==-1&&(w.value=r),l.value=0},goToOption(r,u,e){if(E.value=!1,t.disabled||s.value&&!f.value.static&&l.value===1)return;let y=h();if(y.activeOptionIndex===null){let C=y.options.findIndex(n=>!n.dataRef.disabled);C!==-1&&(y.activeOptionIndex=C)}let S=st(r===L.Specific?{focus:L.Specific,id:u}:{focus:r},{resolveItems:()=>y.options,resolveActiveIndex:()=>y.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});w.value=S,$.value=e??1,m.value=y.options},selectOption(r){let u=m.value.find(y=>y.id===r);if(!u)return;let{dataRef:e}=u;k(J(x.value,{[0]:()=>e.value,[1]:()=>{let y=F(V.value.value).slice(),S=F(e.value),C=y.findIndex(n=>V.compare(S,F(n)));return C===-1?y.push(S):y.splice(C,1),y}}))},selectActiveOption(){if(V.activeOptionIndex.value===null)return;let{dataRef:r,id:u}=m.value[V.activeOptionIndex.value];k(J(x.value,{[0]:()=>r.value,[1]:()=>{let e=F(V.value.value).slice(),y=F(r.value),S=e.findIndex(C=>V.compare(y,F(C)));return S===-1?e.push(y):e.splice(S,1),e}})),V.goToOption(L.Specific,u)},registerOption(r,u){let e={id:r,dataRef:u},y=h(S=>[...S,e]);if(w.value===null){let S=u.value.value;J(x.value,{[0]:()=>V.compare(F(V.value.value),F(S)),[1]:()=>F(V.value.value).some(C=>V.compare(F(C),F(S)))})&&(y.activeOptionIndex=y.options.indexOf(e))}m.value=y.options,w.value=y.activeOptionIndex,$.value=1,y.options.some(S=>!N(S.dataRef.domRef))&&requestAnimationFrame(()=>{let S=h();m.value=S.options,w.value=S.activeOptionIndex})},unregisterOption(r){var u;V.activeOptionIndex.value!==null&&((u=V.options.value[V.activeOptionIndex.value])==null?void 0:u.id)===r&&(E.value=!0);let e=h(y=>{let S=y.findIndex(C=>C.id===r);return S!==-1&&y.splice(S,1),y});m.value=e.options,w.value=e.activeOptionIndex,$.value=1}};tt([d,v,s],()=>V.closeCombobox(),O(()=>l.value===0)),Te(Ie,V),at(O(()=>J(l.value,{[0]:ce.Open,[1]:ce.Closed})));let M=O(()=>V.activeOptionIndex.value===null?null:m.value[V.activeOptionIndex.value].dataRef.value),G=O(()=>{var r;return(r=N(d))==null?void 0:r.closest("form")});return xe(()=>{be([G],()=>{if(!G.value||t.defaultValue===void 0)return;function r(){V.change(t.defaultValue)}return G.value.addEventListener("reset",r),()=>{var u;(u=G.value)==null||u.removeEventListener("reset",r)}},{immediate:!0})}),()=>{let{name:r,disabled:u,form:e,...y}=t,S={open:l.value===0,disabled:u,activeIndex:V.activeOptionIndex.value,activeOption:M.value,value:R.value};return he(q,[...r!=null&&R.value!=null?Je({[r]:R.value}).map(([C,n])=>he(dt,lt({features:ct.Hidden,key:C,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,name:C,value:n}))):[],re({theirProps:{...p,...ke(y,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:S,slots:c,attrs:p,name:"Combobox"})])}}}),gt=ne({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${me()}`}},setup(t,{attrs:c,slots:p,expose:g}){let l=ue("ComboboxButton");g({el:l.buttonRef,$el:l.buttonRef});function a(s){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(s.preventDefault(),l.openCombobox()),ee(()=>{var f;return(f=N(l.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function d(s){switch(s.key){case Q.ArrowDown:s.preventDefault(),s.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case Q.ArrowUp:s.preventDefault(),s.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),ee(()=>{l.value.value||l.goToOption(L.Last)})),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case Q.Escape:if(l.comboboxState.value!==0)return;s.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&s.stopPropagation(),l.closeCombobox(),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let v=nt(O(()=>({as:t.as,type:c.type})),l.buttonRef);return()=>{var s,f;let m={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:w,...$}=t,E={ref:l.buttonRef,id:w,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(s=N(l.optionsRef))==null?void 0:s.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(f=N(l.labelRef))==null?void 0:f.id,w].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:d,onClick:a};return re({ourProps:E,theirProps:$,slot:m,attrs:c,slots:p,name:"ComboboxButton"})}}}),xt=ne({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${me()}`}},emits:{change:t=>!0},setup(t,{emit:c,attrs:p,slots:g,expose:l}){let a=ue("ComboboxInput"),d={value:!1};l({el:a.inputRef,$el:a.inputRef});let v=O(()=>{var i;let R=a.value.value;return N(a.inputRef)?typeof t.displayValue<"u"&&R!==void 0?(i=t.displayValue(R))!=null?i:"":typeof R=="string"?R:"":""});xe(()=>{be([v,a.comboboxState],([i,R],[k,V])=>{if(d.value)return;let M=N(a.inputRef);M&&(V===0&&R===1||i!==k)&&(M.value=i)},{immediate:!0}),be([a.comboboxState],([i],[R])=>{if(i===0&&R===1){let k=N(a.inputRef);if(!k)return;let V=k.value,{selectionStart:M,selectionEnd:G,selectionDirection:r}=k;k.value="",k.value=V,r!==null?k.setSelectionRange(M,G,r):k.setSelectionRange(M,G)}})});let s=_(!1),f=_(null);function m(){s.value=!0}function w(){Ke().nextFrame(()=>{s.value=!1,f.value&&(a.openCombobox(),c("change",f.value),f.value=null)})}function $(i){switch(d.value=!0,i.key){case Q.Backspace:case Q.Delete:if(a.mode.value!==0||!a.nullable.value)return;let R=i.currentTarget;requestAnimationFrame(()=>{if(R.value===""){a.change(null);let k=N(a.optionsRef);k&&(k.scrollTop=0),a.goToOption(L.Nothing)}});break;case Q.Enter:if(d.value=!1,a.comboboxState.value!==0||s.value)return;if(i.preventDefault(),i.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case Q.ArrowDown:return d.value=!1,i.preventDefault(),i.stopPropagation(),J(a.comboboxState.value,{[0]:()=>a.goToOption(L.Next),[1]:()=>a.openCombobox()});case Q.ArrowUp:return d.value=!1,i.preventDefault(),i.stopPropagation(),J(a.comboboxState.value,{[0]:()=>a.goToOption(L.Previous),[1]:()=>{a.openCombobox(),ee(()=>{a.value.value||a.goToOption(L.Last)})}});case Q.Home:if(i.shiftKey)break;return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case Q.PageUp:return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case Q.End:if(i.shiftKey)break;return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case Q.PageDown:return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case Q.Escape:if(d.value=!1,a.comboboxState.value!==0)return;i.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&i.stopPropagation(),a.closeCombobox();break;case Q.Tab:if(d.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function E(i){if(s.value){f.value=i;return}a.openCombobox(),c("change",i)}function h(){d.value=!1}let x=O(()=>{var i,R,k,V;return(V=(k=(R=t.defaultValue)!=null?R:a.defaultValue.value!==void 0?(i=t.displayValue)==null?void 0:i.call(t,a.defaultValue.value):null)!=null?k:a.defaultValue.value)!=null?V:""});return()=>{var i,R,k,V,M,G;let r={open:a.comboboxState.value===0},{id:u,displayValue:e,onChange:y,...S}=t,C={"aria-controls":(i=a.optionsRef.value)==null?void 0:i.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(R=a.options.value[a.activeOptionIndex.value])==null?void 0:R.id,"aria-labelledby":(M=(k=N(a.labelRef))==null?void 0:k.id)!=null?M:(V=N(a.buttonRef))==null?void 0:V.id,"aria-autocomplete":"list",id:u,onCompositionstart:m,onCompositionend:w,onKeydown:$,onInput:E,onBlur:h,role:"combobox",type:(G=p.type)!=null?G:"text",tabIndex:0,ref:a.inputRef,defaultValue:x.value,disabled:a.disabled.value===!0?!0:void 0};return re({ourProps:C,theirProps:S,slot:r,attrs:p,slots:g,features:pe.RenderStrategy|pe.Static,name:"ComboboxInput"})}}}),yt=ne({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:c,slots:p,expose:g}){let l=ue("ComboboxOptions"),a=`headlessui-combobox-options-${me()}`;g({el:l.optionsRef,$el:l.optionsRef}),ge(()=>{l.optionsPropsRef.value.static=t.static}),ge(()=>{l.optionsPropsRef.value.hold=t.hold});let d=ot(),v=O(()=>d!==null?(d.value&ce.Open)===ce.Open:l.comboboxState.value===0);return ut({container:O(()=>N(l.optionsRef)),enabled:O(()=>l.comboboxState.value===0),accept(s){return s.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}}),()=>{var s,f,m;let w={open:l.comboboxState.value===0},$={"aria-labelledby":(m=(s=N(l.labelRef))==null?void 0:s.id)!=null?m:(f=N(l.buttonRef))==null?void 0:f.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0},E=ke(t,["hold"]);return re({ourProps:$,theirProps:E,slot:w,attrs:c,slots:p,features:pe.RenderStrategy|pe.Static,visible:v.value,name:"ComboboxOptions"})}}}),ht=ne({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:c,attrs:p,expose:g}){let l=ue("ComboboxOption"),a=`headlessui-combobox-option-${me()}`,d=_(null);g({el:d,$el:d});let v=O(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===a:!1),s=O(()=>J(l.mode.value,{[0]:()=>l.compare(F(l.value.value),F(t.value)),[1]:()=>F(l.value.value).some(i=>l.compare(F(i),F(t.value)))})),f=O(()=>({disabled:t.disabled,value:t.value,domRef:d}));xe(()=>l.registerOption(a,f)),Ue(()=>l.unregisterOption(a)),ge(()=>{l.comboboxState.value===0&&v.value&&l.activationTrigger.value!==0&&ee(()=>{var i,R;return(R=(i=N(d))==null?void 0:i.scrollIntoView)==null?void 0:R.call(i,{block:"nearest"})})});function m(i){if(t.disabled)return i.preventDefault();l.selectOption(a),l.mode.value===0&&l.closeCombobox(),Ge()||requestAnimationFrame(()=>{var R;return(R=N(l.inputRef))==null?void 0:R.focus()})}function w(){if(t.disabled)return l.goToOption(L.Nothing);l.goToOption(L.Specific,a)}let $=rt();function E(i){$.update(i)}function h(i){$.wasMoved(i)&&(t.disabled||v.value||l.goToOption(L.Specific,a,0))}function x(i){$.wasMoved(i)&&(t.disabled||v.value&&(l.optionsPropsRef.value.hold||l.goToOption(L.Nothing)))}return()=>{let{disabled:i}=t,R={active:v.value,selected:s.value,disabled:i},k={id:a,ref:d,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":s.value,disabled:void 0,onClick:m,onFocus:w,onPointerenter:E,onMouseenter:E,onPointermove:h,onMousemove:h,onPointerleave:x,onMouseleave:x};return re({ourProps:k,theirProps:t,slot:R,attrs:p,slots:c,name:"ComboboxOption"})}}});const le=t=>!(t===""||t===null),wt=t=>{let c=/^[0-9]+$/;return!!t.match(c)},Vt=(t,c)=>t.length<=c,_t=t=>{let c=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!t.match(c)},St=["disabled","id","value","name"],Rt=["for"],Ce={__name:"RadioGroupForm",props:{questionId:String,options:Array,isDisabled:Boolean,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(!0),j(q,null,ye(t.options,(d,v)=>(b(),j("div",{key:d.title,class:"flex items-center my-3"},[Ae(o("input",{disabled:t.isDisabled,id:`radio-${v}${t.questionId}`,type:"radio",value:d.id,"onUpdate:modelValue":a[0]||(a[0]=s=>g.value=s),name:`name-${v}${t.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,St),[[Ee,g.value]]),o("label",{for:`radio-${v}${t.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300 first-letter:uppercase"},I(d.title),9,Rt)]))),128))}},kt={class:"grid grid-cols-4"},Ot={class:"col-span-4 text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},It={class:"text-red-700"},Ct={class:"w-full text-start first-letter:uppercase"},Dt={class:"text-xs text-gray-600"},$t={class:"relative col-span-4 mt-1 rounded-md ms-4"},Tt={class:"col-span-4 text-end"},Ut={class:"text-xs text-red-600"},Pt={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},isDisabled:Boolean,placeholder:String,question:Object,helperText:String},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",kt,[o("div",Ot,[K(I(t.question.statement)+" ",1),o("span",It,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Ct,[o("span",Dt,I(t.question.helpQuestion),1)]),o("div",$t,[A(Ce,{isDisabled:t.isDisabled,questionId:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["isDisabled","questionId","options","modelValue"])]),o("div",Tt,[o("span",Ut,I((d=t.question.error)==null?void 0:d.text),1)])])}}},At={class:"grid grid-cols-4"},Et={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},jt={class:"text-red-600 font-mono"},Ft={class:"relative mt-1 rounded-md col-span-4 ps-4"},Bt={class:"col-span-4 text-end"},Nt={class:"text-xs text-red-600"},Lt={__name:"MultipleSelection",props:{modelValue:{type:[Array,String]},question:Object},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>{var l;return Array.isArray(p.modelValue)?p.modelValue:(l=p.modelValue)==null?void 0:l.split(",")},set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",At,[o("label",Et,[K(I(t.question.statement)+" ",1),o("span",jt,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Ft,[A(Ze,{questionIndex:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["questionIndex","options","modelValue"])]),o("div",Bt,[o("span",Nt,I((d=t.question.error)==null?void 0:d.text),1)])])}}},Mt={class:"relative mt-1 first-letter:uppercase"},qt={class:"block text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},zt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},Qt={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},ie={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String},isDisabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:c}){const p=t;_(!0);const g=O({get:()=>p.modelValue,set:v=>c("update:modelValue",v)});let l=_(""),a=_(!1),d=O(()=>p.items.filter(v=>v[`${p.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));return(v,s)=>(b(),D(P(bt),{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=f=>g.value=f)},{default:B(()=>[o("div",Mt,[o("label",qt,I(t.label),1),o("div",zt,[A(P(xt),{class:oe([t.error&&P(a)&&!g.value?"ring-red-600":"ring-gray-300","capitalize w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:f=>f==null?void 0:f[`${t.itemTitle}`],onChange:s[0]||(s[0]=f=>we(l)?l.value=f.target.value:l=f.target.value),placeholder:t.placeholder},null,8,["class","displayValue","placeholder"]),A(P(gt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:B(()=>[A(P(We),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),A(P(He),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:s[1]||(s[1]=f=>we(l)?l.value="":l="")},{default:B(()=>[A(P(yt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:B(()=>[P(d).length===0&&P(l)!==""?(b(),j("div",Qt," Sin datos ")):X("",!0),(b(!0),j(q,null,ye(P(d),f=>(b(),D(P(ht),{as:"template",key:f[`${t.itemValue}`],value:f,disabled:t.isDisabled},{default:B(({selected:m,active:w})=>[o("li",{class:oe(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":w,"text-gray-900":!w}])},[o("span",{class:oe(["block truncate first-letter:uppercase",{"font-medium":m,"font-normal":!m}])},I(f[`${t.itemTitle}`]),3),m?(b(),j("span",{key:0,class:oe(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":w,"text-teal-600":!w}])},[A(P(et),{class:"h-5 w-5","aria-hidden":"true"})],2)):X("",!0)],2)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Kt={class:"block text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},Gt={class:"text-red-600 font-mono"},Ht={class:"grid grid-cols-3 gap-x-5"},Xt={class:"col-span-3 mt-2"},Yt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],isReadonly:Boolean,error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:c}){const p=t,g=new Oe,l=O({get:()=>p.modelValue,set:h=>c("update:modelValue",h)}),a=_([]),d=_([]),v=_([]),s=_({departamento:null,provincia:null,distrito:null}),f=async h=>{s.value.provincia=null,d.value=[],s.value.distrito=null,v.value=[],d.value=await g.getProvincias(h.code),c("update:modelValue",null)},m=async h=>{c("update:modelValue",null),v.value=[],s.value.distrito=null,v.value=await g.getDistritos(h.code)},w=async h=>{let x=await g.getUbigeo(h[0]);s.value.departamento={code:x.idDepartment,title:x.department},s.value.provincia={code:x.idProvince,title:x.province},s.value.distrito={code:x.idDistrict,title:x.district},p.question.other=h[1]},$=async()=>{a.value.length==0&&(a.value=await g.getDepartamentos())};return(async()=>{let h=l.value;h&&(h=h.split("%%%",2),await w(h))})(),(h,x)=>(b(),j(q,null,[o("label",Kt,[K(I(t.question.statement)+" ",1),o("span",Gt,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Ht,[o("div",null,[A(ie,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:$,itemValue:"code",modelValue:s.value.departamento,"onUpdate:modelValue":[x[0]||(x[0]=i=>s.value.departamento=i),f],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[A(ie,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:s.value.provincia,"onUpdate:modelValue":[x[1]||(x[1]=i=>s.value.provincia=i),m],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[A(ie,{error:t.error,items:v.value,itemValue:"code",placeholder:"Distrito",modelValue:s.value.distrito,"onUpdate:modelValue":[x[2]||(x[2]=i=>s.value.distrito=i),x[3]||(x[3]=i=>l.value=i.code)],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",Xt,[A(te,{"is-required":t.question.isRequired==="true",helperText:t.question.helpQuestion,modelValue:t.question.other,"onUpdate:modelValue":x[4]||(x[4]=i=>t.question.other=i),label:"Dirección",isReadonly:t.isReadonly},null,8,["is-required","helperText","modelValue","isReadonly"])])])],64))}},Jt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},Zt={class:"text-red-600 font-mono"},Wt={class:"grid grid-cols-3 gap-5"},ea={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],isReadonly:Boolean,error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:c}){const p=t,g=new Oe,l=O({get:()=>p.modelValue,set:h=>c("update:modelValue",h)}),a=_([]),d=_([]),v=_([]),s=_({departamento:null,provincia:null,distrito:null}),f=async h=>{s.value.provincia=null,d.value=[],s.value.distrito=null,v.value=[],d.value=await g.getProvincias(h.code),c("update:modelValue",null)},m=async h=>{c("update:modelValue",null),v.value=[],s.value.distrito=null,v.value=await g.getDistritos(h.code)},w=async()=>{a.value=await g.getDepartamentos()},$=async h=>{let x=await g.getUbigeo(h);s.value.departamento={code:x.idDepartment,title:x.department},s.value.provincia={code:x.idProvince,title:x.province},s.value.distrito={code:x.idDistrict,title:x.district}};return(async()=>{w(),l.value&&await $(l.value)})(),(h,x)=>(b(),j(q,null,[o("label",Jt,[K(I(t.question.statement)+" ",1),o("span",Zt,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Wt,[o("div",null,[A(ie,{placeholder:"Departamento",error:t.error,items:a.value,itemValue:"code",modelValue:s.value.departamento,"onUpdate:modelValue":[x[0]||(x[0]=i=>s.value.departamento=i),f],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[A(ie,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:s.value.provincia,"onUpdate:modelValue":[x[1]||(x[1]=i=>s.value.provincia=i),m],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[A(ie,{error:t.error,items:v.value,itemValue:"code",placeholder:"Distrito",modelValue:s.value.distrito,"onUpdate:modelValue":[x[2]||(x[2]=i=>s.value.distrito=i),x[3]||(x[3]=i=>l.value=i.code)],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])])])],64))}},ta={__name:"StudyCycleForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:a=>c("update:modelValue",a)}),l=[{id:1,title:"Semestre I"},{id:2,title:"Semestre II    "},{id:3,title:"Semestre III"},{id:4,title:"Semestre IV"},{id:5,title:"Semestre V"},{id:6,title:"Semestre VI"},{id:7,title:"Semestre VII"},{id:8,title:"Semestre VIII"},{id:9,title:"Semestre IX"},{id:10,title:"Semestre X"},{id:11,title:"Semestre XI"},{id:12,title:"Semestre XII"}];return(a,d)=>(b(),D(ve,{isDisabled:t.isDisabled,isRequired:t.question.isRequired==="true",modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=v=>g.value=v),label:t.question.statement,error:t.question.error,options:l},null,8,["isDisabled","isRequired","modelValue","label","error"]))}},aa=[{id:"001",title:"trabajo social"},{id:"003",title:"medicina veterinaria y zootecnía"},{id:"004",title:"medicina humana"},{id:"005",title:"ingeniería química"},{id:"006",title:"ingeniería mecánica, eléctrica, electrónica y sistemas"},{id:"007",title:"ingeniería geológica y metalúrgica"},{id:"008",title:"ingeniería estadística e informática"},{id:"009",title:"ingeniería económica"},{id:"010",title:"ingeniería de minas"},{id:"011",title:"ingeniería civil y arquitectura"},{id:"012",title:"ingeniería agrícola"},{id:"013",title:"ciencias sociales"},{id:"014",title:"enfermería"},{id:"015",title:"ciencias jurídicas y políticas"},{id:"016",title:"ciencias de la salud"},{id:"017",title:"ciencias de la educación"},{id:"018",title:"ciencias contables y administrativas"},{id:"019",title:"ciencias biológicas"},{id:"020",title:"ciencias agrarias"}],la={__name:"FacuForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(),D(ve,{isDisabled:t.isDisabled,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=d=>g.value=d),label:t.question.statement,error:t.question.error,options:P(aa)},null,8,["isDisabled","modelValue","label","error","options"]))}},oa=[{id:"001",title:"administración"},{id:"002",title:"antropología"},{id:"003",title:"arquitectura y urbanismo"},{id:"004",title:"arte: artes plásticas"},{id:"005",title:"arte: danza"},{id:"006",title:"arte: música"},{id:"007",title:"arte: teatro"},{id:"008",title:"biología: ecología"},{id:"009",title:"biología: microbiología y laboratorio clínico"},{id:"010",title:"biología: pesquería"},{id:"011",title:"ciencias contables"},{id:"012",title:"ciencias de la comunicación social"},{id:"013",title:"ciencias físico matemáticas: física"},{id:"014",title:"ciencias físico matemáticas: matemáticas"},{id:"015",title:"derecho"},{id:"034",title:"educación física"},{id:"035",title:"educación inicial"},{id:"036",title:"educación primaria"},{id:"037",title:"educación secundaria de la especialidad de ciencia, tecnología y ambiente"},{id:"038",title:"educación secundaria de la especialidad de ciencias sociales"},{id:"039",title:"educación secundaria de la especialidad de lengua, literatura, psicología y filosofía"},{id:"040",title:"educación secundaria de la especialidad de matemática, física, computación e informática"},{id:"041",title:"enfermería"},{id:"042",title:"ingeniería agrícola"},{id:"043",title:"ingeniería agroindustrial"},{id:"044",title:"ingeniería agronómica"},{id:"045",title:"ingeniería civil"},{id:"046",title:"ingeniería de minas"},{id:"047",title:"ingeniería de sistemas"},{id:"048",title:"ingeniería económica"},{id:"049",title:"ingeniería electrónica"},{id:"050",title:"ingeniería estadística e informática"},{id:"051",title:"ingeniería geológica"},{id:"052",title:"ingeniería mecánica eléctrica"},{id:"053",title:"ingeniería metalúrgica"},{id:"054",title:"ingeniería química"},{id:"055",title:"ingeniería topográfica y agrimensura"},{id:"169",title:"medicina humana"},{id:"170",title:"medicina veterinaria y zootecnía"},{id:"171",title:"nutrición humana"},{id:"172",title:"odontología"},{id:"231",title:"sociología"},{id:"232",title:"trabajo social"},{id:"233",title:"turismo"}],ia={__name:"ProStudyForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(),D(ve,{isDisabled:t.isDisabled,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=d=>g.value=d),label:t.question.statement,error:t.question.error,options:P(oa)},null,8,["isDisabled","modelValue","label","error","options"]))}},sa={class:"grid grid-cols-4"},na={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},ra={class:"text-red-600 font-mono"},ua={class:"relative col-span-4 mt-1 rounded-md ms-4"},da={class:"col-span-4"},ca={class:"col-span-4 text-end"},pa={class:"text-xs text-red-600"},va={__name:"OneSelectionOtherForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",sa,[o("label",na,[K(I(t.question.statement)+" ",1),o("span",ra,I(t.question.isRequired==="true"?"*":""),1)]),o("div",ua,[A(Ce,{questionId:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["questionId","options","modelValue"])]),o("div",da,[A(te,{modelValue:t.question.answer.text,"onUpdate:modelValue":a[1]||(a[1]=v=>t.question.answer.text=v),label:"Especifique"},null,8,["modelValue"])]),o("div",ca,[o("span",pa,I((d=t.question.error)==null?void 0:d.text),1)])])}}},ma={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},fa={class:"col-span-2 rounded-lg"},ba=["id"],ga={class:"w-full text-end"},xa={class:"text-xs text-red-600"},ya={class:"w-full text-end"},ha={class:"text-xs text-red-600"},wa={class:"flex justify-end mt-4"},Va={__name:"Form",props:{questions:Array,section:Object},emits:["onSuccess","onFaild"],setup(t,{emit:c}){const p=t,g=je(),l=new Re,a=_(null),d=_({show:!1,text:null,type:"success"}),v=O(()=>p.questions),s=_(!0),f=r=>{v.value.map(u=>(u.isDependent==r.id&&(u.optionTrigger===r.answer.options||u.optionTrigger===null?u.show=!0:(u.answer=[],u.show=!1)),u))},m=(r,u,e=!1)=>{e&&f(u),u.isRequired==="true"&&w(r,u)},w=(r,u)=>{v.value.map(e=>{e.id===u.id&&(le(r)?u.isRequired==="false"&&!le(r)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Obligatorio"},s.value=!1))})},$=(r,u)=>{v.value.map(e=>{e.id==u.id&&(u.isRequired==="true"&&!le(r)?(e.error={isError:!0,text:"Obligatorio"},s.value=!1):u.isRequired==="false"&&!le(r)?(e.error={isError:!1,text:null},s.value=!0):_t(r)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Formato no valido"},s.value=!1))})},E=(r,u)=>{v.value.map(e=>{e.id==u.id&&(le(r)?wt(r)?u.isRequired==="false"&&!le(r)?(e.error={isError:!1,text:null},s.value=!0):Vt(r,9)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Longitud debe se 9 digitos"},s.value=!1):(e.error={isError:!0,text:"Solo se permite numeros"},s.value=!1):(e.error={isError:!0,text:"Obligatorio"},s.value=!1))})},h=["78ae9492-a909-459f-ba53-15165c884d87","d2574937-e2fc-4eb5-b612-d767e3610a04","fb5c10df-f60d-4815-a007-a189e879054e","e8367e12-f088-4188-bed8-50342bac562c","de9c81d9-87d5-4cf4-b2f0-5274399ff94c","50af5759-8009-4419-bfc2-8df851be62b1","4d36be9a-1567-4d80-a726-a5a1bc2a33c7","36f9a47d-457d-4052-ab25-47b4decb887f","574ba955-5176-4997-8e34-42524cafa862","6bc3b523-2a89-423d-99bf-53692c004633"],x=["78ae9492-a909-459f-ba53-15165c884d87","d2574937-e2fc-4eb5-b612-d767e3610a04","fb5c10df-f60d-4815-a007-a189e879054e","e8367e12-f088-4188-bed8-50342bac562c","c9175462-8e03-47b1-9450-2f126a1655c2","de9c81d9-87d5-4cf4-b2f0-5274399ff94c","a3056caa-84a9-44a0-9ee5-46a59ad3f073","ab123cd2-c64d-44d2-8023-af2849bf6f9d","bd4313bd-1709-4bfd-8fae-bfe2eb6e5d05","16373178-2cb7-4a9e-be10-33d1145fcb48","85c4a938-b006-45a8-bdbd-1c4223656ab6","50af5759-8009-4419-bfc2-8df851be62b1","4d36be9a-1567-4d80-a726-a5a1bc2a33c7","36f9a47d-457d-4052-ab25-47b4decb887f","574ba955-5176-4997-8e34-42524cafa862","6bc3b523-2a89-423d-99bf-53692c004633"],i=O(()=>g.currentUser?x:h),R=()=>{let r={section_:p.section.id,answers_:[]};const u=[1,2,3,5,8,9,10,20,50],e=[0,4],y=[6],S=[11],C=[30];return v.value.forEach(n=>{var ae;if((!n.isDependent||n.show)&&!i.value.includes(n.id))if(u.includes(n.type))r.answers_.push({qst_:n.id,opts_:null,txt_:n.answer.text});else if(e.includes(n.type))r.answers_.push({qst_:n.id,opts_:[n.answer.options],txt_:null});else if(y.includes(n.type))r.answers_.push({qst_:n.id,opts_:Array.isArray(n.answer.options)?n.answer.options:(ae=n.answer.options)==null?void 0:ae.split(","),txt_:null});else if(S.includes(n.type)){let fe=n.answer.text.split("%%%",2);r.answers_.push({qst_:n.id,opts_:null,txt_:fe[0]+"%%%"+n.other})}else C.includes(n.type)&&r.answers_.push({qst_:n.id,opts_:[n.answer.options],txt_:n.answer.text})}),r},k=_([]),V=()=>{var r=0;return k.value=[],v.value.forEach(u=>{var e,y,S,C,n;!((e=u.answer)!=null&&e.text)&&((y=u.answer)!=null&&y.options&&Array.isArray((S=u.answer)==null?void 0:S.options)&&((C=u.answer)==null?void 0:C.options.length)===0||!((n=u.answer)!=null&&n.options))&&u.isRequired==="true"&&(!u.isDependent||u.show)?(u.error={isError:!0,text:"Obligatorio"},k.value.push(u.id),r++):u.error={isError:!1,text:null}}),!(r>0)},M=async()=>{if(V()){let u=R(),e=await l.saveSection(u);return d.value.show=!0,d.value.text="Datos actualizados",d.value.type="success",c("onSuccess",d.value),e}return document.getElementById(k.value[0]).scrollIntoView("smooth"),console.error("Error ..."),d.value.show=!0,d.value.text="Responda las preguntas de manera correcta",d.value.type="danger",c("onFaild",d.value),!1};return(async()=>{v.value.forEach(r=>{f(r)})})(),(r,u)=>(b(),j("div",ma,[o("div",fa,[o("ul",{ref_key:"refList",ref:a,class:""},[(b(!0),j(q,null,ye(v.value,(e,y)=>{var S,C;return b(),j("li",{key:e.id,id:e.id,class:oe([!e.isDependent||e.show?"pt-2 pb-5":"",e.show?"bg-slate-50  -mt-3 px-4 pt-2 rounded-lg":""])},[!e.isDependent||e.show?(b(),j(q,{key:0},[e.type===0?(b(),D(Pt,{key:0,isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,!0)]},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])):e.type===1?(b(),D(te,{key:1,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e)],type:"text",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===2?(b(),D(te,{key:2,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e)],type:"date",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===3?(b(),D(te,{key:3,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],type:"number",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===50?(b(),D(ta,{key:4,isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])):e.type===21?(b(),D(la,{key:5,isRequired:e.isRequired==="true",isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isRequired","isDisabled","question","modelValue","onUpdate:modelValue"])):X("",!0),e.type===30?(b(),D(va,{key:6,question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])):e.type===20?(b(),D(ia,{key:7,isDisabled:i.value.includes(e.id),isRequired:e.isRequired==="true",question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isDisabled","isRequired","question","modelValue","onUpdate:modelValue"])):e.type===4?(b(),D(ve,{key:8,isRequired:e.isRequired==="true",modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e,y)],label:e.statement,error:e.error},null,8,["isRequired","modelValue","onUpdate:modelValue","label","error"])):e.type===6?(b(),D(Lt,{key:9,question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,y)]},null,8,["question","modelValue","onUpdate:modelValue"])):e.type===8?(b(),D(te,{key:10,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>$(n,e)],type:"email",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===9?(b(),D(te,{key:11,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>E(n,e)],type:"tel",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===10?(b(),j(q,{key:12},[A(ea,{question:e,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],error:!!e.error},null,8,["question","isReadonly","modelValue","onUpdate:modelValue","error"]),o("div",ga,[o("span",xa,I((S=e.error)==null?void 0:S.text),1)])],64)):e.type===11?(b(),j(q,{key:13},[A(Yt,{isReadonly:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],error:!!e.error},null,8,["isReadonly","question","modelValue","onUpdate:modelValue","error"]),o("div",ya,[o("span",ha,I((C=e.error)==null?void 0:C.text),1)])],64)):X("",!0)],64)):X("",!0)],10,ba)}),128))],512),o("div",wa,[Fe(r.$slots,"footer",{submit:M})])])]))}};const _a=o("div",{class:"flex items-center text-xl text-green-500"}," Ficha Integral Completada ",-1),Sa=o("div",{class:"flex flex-col items-center text-green-500"}," ¡Felicidades, has completado exitosamente la ficha integral! Ahora estás listo para matricularte. ",-1),Ra={class:"z-10 fixed right-2 top-1/2 block md:hidden"},ka=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})],-1),Oa={class:"text-sm sm:text-xl uppercase font-bold p-5 text-blue-950"},Ia={class:"grid grid-cols-4 gap-4"},Ca=o("strong",null," Indicaciones: ",-1),Da=o("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),$a=o("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),Ta={class:"col-span-4 lg:col-span-1 hidden md:block"},Ua={class:"col-span-4 lg:col-span-3 rounded-lg bg-white p-6 shadow-lg mb-4"},Pa=o("p",null,"Ahora estás listo para matricularte.",-1),Aa={class:"md:text-3xl text-2xl font-semibold mb-4 text-gray-700 first-letter:uppercase"},Ea={class:"text-xl font-light uppercase flex items-center underline underline-offset-8 text-blue-800"},ja=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 me-2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})],-1),Fa={key:1,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Ba={class:"grid md:grid-cols-2 w-full gap-4"},Na={class:"previous"},La={class:"flex items-center justify-start"},Ma=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center me-4 rotate-180"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),qa={class:"text-start"},za=o("p",{class:"font-light"},"Anterior",-1),Qa={class:"font-semibold text-lg first-letter:uppercase pb-0"},Ka={class:"flex items-center justify-start"},Ga=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center me-4 rotate-180"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),Ha={class:"text-start"},Xa=o("p",{class:"font-light"},"Anterior",-1),Ya={class:"font-semibold text-lg first-letter:uppercase pb-0"},Ja={class:"nexts"},Za={class:"flex items-center justify-end"},Wa={class:"text-end"},el={class:"font-light"},tl={class:"uppercase"},al={class:"font-semibold text-lg first-letter:uppercase pb-0"},ll=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center ms-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),ol={class:"flex items-center justify-end"},il={class:"text-end"},sl={class:"font-light"},nl={class:"uppercase"},rl={class:"font-semibold text-lg first-letter:uppercase pb-0"},ul=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center ms-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),dl=o("div",{class:"text-end"},[o("span",null," Guardar "),o("h5",{class:"text-lg first-letter:uppercase"}," Finalizar ")],-1),cl={class:"text-end"},pl={class:"flex items-center justify-end"},vl={class:"text-end"},ml={class:"font-light"},fl={class:"uppercase"},bl={class:"font-semibold text-lg first-letter:uppercase pb-0"},Ol={__name:"survey",setup(t){const c=new Be,p=new Re,g=Ne(),l=Le(),a=_(null),d=_(null),v=_(null),s=_(null),f=_({show:!1,text:"null",type:"success"}),m=_({section:null,topic:null}),w=_({section:null,topic:null}),$=_({section:null,topic:null}),E=_(!1),h=_(!1),x=U=>{f.value=U,setTimeout(()=>{f.value=!1},1500)},i=()=>{window.scroll({top:80,left:0,behavior:"smooth"})},R=async()=>{h.value=!0,await p.finishSurvey(a.value.id)&&(a.value.hasFinished="true"),h.value=!1},k=_(!1),V=async U=>{h.value=!0;let T=await r(U.id);T.length>0&&await g.setPositions(a.value.id,U.id,T[0].id)&&(a.value.topic=U.id,a.value.section=T[0].id,v.value=T,await ae(a.value),s.value=await u(m.value.section.id)),h.value=!1},M=async U=>{h.value=!0;let T=await u(U.id);T.length>0&&await g.setPositions(a.value.id,m.value.topic.id,U.id)&&(a.value.section=U.id,await ae(a.value),s.value=T),h.value=!1},G=async U=>await p.getTopics(U),r=async U=>await p.getSections(U),u=async U=>await p.getQuestions(U),e=(U,T)=>{let z=T.findIndex(Z=>U.id===Z.id);return z!==-1&&T.length!==z+1&&T.findIndex(H=>{var Y;return((Y=T[z+1])==null?void 0:Y.id)===H.id})!==-1?T[z+1]:null},y=(U,T)=>{let z=T.findIndex(Z=>U.id===Z.id);return z!==-1&&z!==0&&T.findIndex(H=>{var Y;return((Y=T[z-1])==null?void 0:Y.id)===H.id})!==-1?T[z-1]:null},S=async U=>{m.value.section=v.value.find(T=>T.id===U.section),m.value.topic=d.value.find(T=>T.id===U.topic)},C=async()=>{w.value.topic=e(m.value.topic,d.value),w.value.section=e(m.value.section,v.value)},n=async()=>{$.value.topic=y(m.value.topic,d.value),$.value.section=y(m.value.section,v.value)},ae=async U=>{await S(U),await C(),await n()},fe=async()=>{a.value=await p.getSurvey(l.params.id),a.value?a.value.topic&&a.value.section?(d.value=await G(a.value.id),v.value=await r(a.value.topic),s.value=await u(a.value.section),await ae(a.value)):(c.back(),g.cont++):c.push({name:"home"})};return(async()=>{E.value=!0,await fe(),E.value=!1})(),(U,T)=>(b(),D(Me,null,{default:B(()=>{var z,Z;return[A(ze,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:B(()=>[f.value.show?(b(),D(P(qe),{key:0,class:oe(["fixed top-4 right-2 z-20 shadow-lg border rounded",f.value.type==="success"?"border-green-200":"border-red-200"]),type:f.value.type,translate:"yes",transition:"left",divide:""},{default:B(()=>[K(I(f.value.text),1)]),_:1},8,["class","type"])):X("",!0)]),_:1}),E.value?(b(),j(q,{key:0},[E.value?(b(),D(Ve,{key:0})):X("",!0)],64)):(b(),j(q,{key:1},[k.value?(b(),D(P(Qe),{key:0,onClose:T[0]||(T[0]=H=>k.value=!k.value),escapable:!0},{header:B(()=>[_a]),body:B(()=>[Sa]),_:1})):X("",!0),o("div",Ra,[A(Xe,null,{activator:B(({modal:H})=>[A(P(W),{onClick:H,color:"dark"},{default:B(()=>[ka]),_:2},1032,["onClick"])]),content:B(()=>[A(Se,{changeTopic:V,topics:d.value,current:m.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),_:1})]),o("h2",Oa,I(a.value.title),1),o("div",Ia,[A(P(_e),{type:"info",class:"col-span-4",ref:"alert"},{default:B(()=>[Ca,Da,$a]),_:1},512),o("div",Ta,[A(Se,{class:"sticky top-2",changeTopic:V,topics:d.value,current:m.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),o("div",Ua,[a.value.hasFinished==="true"?(b(),D(P(_e),{key:0,type:"success",class:"col-span-4 font-medium text-xl mb-3",ref:"alert"},{default:B(()=>[K(" ¡Felicidades, has completado exitosamente la ficha integral! "),Pa]),_:1},512)):X("",!0),o("h2",Aa,I((z=m.value.topic)==null?void 0:z.title),1),o("p",Ea,[ja,K(" "+I((Z=m.value.section)==null?void 0:Z.title),1)]),v.value?(b(),j(q,{key:2},[h.value?(b(),D(Ve,{key:0})):(b(),D(Va,{key:1,questions:s.value,section:m.value.section,onOnSuccess:x,onOnFaild:x},{footer:B(({submit:H})=>[o("div",Ba,[o("div",Na,[$.value.section&&a.value.hasFinished==="true"?(b(),D(P(W),{key:0,class:"w-full",onClick:T[1]||(T[1]=async()=>{await M($.value.section),i()})},{default:B(()=>[o("div",La,[Ma,o("div",qa,[za,o("h4",Qa,I($.value.section.title),1)])])]),_:1})):(b(),j(q,{key:1},[$.value.topic&&a.value.hasFinished==="true"?(b(),D(P(W),{key:0,color:"light",onClick:T[2]||(T[2]=async()=>{await V($.value.topic),i()}),class:"w-full"},{default:B(()=>[o("div",Ka,[Ga,o("div",Ha,[Xa,o("h4",Ya,I($.value.topic.title),1)])])]),_:1})):X("",!0)],64))]),o("div",Ja,[w.value.section?(b(),D(P(W),{key:0,onClick:async()=>{await H()&&(await M(w.value.section),i())},class:"w-full"},{default:B(()=>[o("div",Za,[o("div",Wa,[o("p",el,[K(" Guardar ("),o("small",tl,I(m.value.section.title),1),K(") ")]),o("h4",al,I(w.value.section.title),1)]),ll])]),_:2},1032,["onClick"])):(b(),j(q,{key:1},[w.value.topic!==null?(b(),D(P(W),{key:0,color:"light",onClick:async()=>{await H()&&(await V(w.value.topic),i())},class:"w-full"},{default:B(()=>[o("div",ol,[o("div",il,[o("p",sl,[K(" Guardar ("),o("small",nl,I(m.value.section.title),1),K(") ")]),o("h4",rl,I(w.value.topic.title),1)]),ul])]),_:2},1032,["onClick"])):(b(),j(q,{key:1},[a.value.hasFinished==="false"?(b(),D(P(W),{key:0,color:"green",onClick:async()=>{await H()&&(await R(),i(),k.value=!0)},class:"w-full"},{default:B(()=>[dl]),_:2},1032,["onClick"])):(b(),D(P(W),{key:1,onClick:async()=>{await H()&&i()},class:"w-full"},{default:B(()=>[o("div",cl,[o("div",pl,[o("div",vl,[o("p",ml,[K(" Guardar ("),o("small",fl,I(m.value.section.title),1),K(") ")]),o("h4",bl,I(m.value.section.title),1)])])])]),_:2},1032,["onClick"]))],64))],64))])])]),_:1},8,["questions","section"]))],64)):(b(),j("h4",Fa," no hay secciones "))])])],64))]}),_:1}))}};export{Ol as default};
