var Ce=Object.defineProperty;var De=(t,c,p)=>c in t?Ce(t,c,{enumerable:!0,configurable:!0,writable:!0,value:p}):t[c]=p;var ie=(t,c,p)=>(De(t,typeof c!="symbol"?c+"":c,p),p);import{I as de,d as se,r as _,b as O,K as B,p as $e,e as ge,O as fe,Q as he,F as M,w as be,f as Te,n as ee,i as Ue,o as b,c as j,m as xe,A as Pe,R as Ee,a as o,t as I,l as G,j as P,g as $,h as F,u as A,q as le,S as we,x as J,U as Ae,k as je,V as Se,C as Be,y as Fe,W as Ne,X as Le,Y as Me,T as qe,Z as Ve,P as W,M as ze}from"./index-a3389793.js";import{r as Qe,n as Ke,S as Ge,_ as He}from"./HModal-f5a65fb9.js";import{_ as _e}from"./IndexSurvey-0bf66078.js";import{d as Xe,e as Ye,_ as Ze,r as Je,b as We,a as ve}from"./HSelect-ae0989f7.js";import{u as Y,o as N,F as et,c as tt,l as ce,K as at,H as ne,T as Re,t as me,N as pe,p as lt,O as ot,a as K}from"./use-outside-click-878fda62.js";import{x as it,a as L,b as st,u as nt}from"./use-text-value-bf73185e.js";import{p as rt}from"./use-tree-walker-a67349eb.js";import{f as ut,a as dt,_ as te}from"./InputForm-ac5fa4fa.js";class ke{constructor(){ie(this,"getDepartamentos",async()=>(await de.get("https://service2.unap.edu.pe/SURVEY_PLACES/v1/departments/")).data.data);ie(this,"getProvincias",async c=>(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/provinces/${c}/`)).data.data);ie(this,"getDistritos",async c=>(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/districts/${c}/`)).data.data);ie(this,"getUbigeo",async c=>{try{return(await de.get(`https://service2.unap.edu.pe/SURVEY_PLACES/v1/${c}/`)).data.data[0]}catch{return null}})}}function ct(t,c){return t===c}var pt=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(pt||{}),vt=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(vt||{}),mt=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(mt||{});let Oe=Symbol("ComboboxContext");function re(t){let c=Ue(Oe,null);if(c===null){let p=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,re),p}return c}let ft=se({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ct},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:c,attrs:p,emit:g}){let l=_(1),a=_(null),d=_(null),v=_(null),s=_(null),f=_({static:!1,hold:!1}),m=_([]),w=_(null),D=_(1),E=_(!1);function h(r=u=>u){let u=w.value!==null?m.value[w.value]:null,e=ot(r(m.value.slice()),S=>N(S.dataRef.domRef)),y=u?e.indexOf(u):null;return y===-1&&(y=null),{options:e,activeOptionIndex:y}}let x=O(()=>t.multiple?1:0),i=O(()=>t.nullable),[R,k]=Xe(O(()=>t.modelValue===void 0?Y(x.value,{[1]:[],[0]:void 0}):t.modelValue),r=>g("update:modelValue",r),O(()=>t.defaultValue)),V={comboboxState:l,value:R,mode:x,compare(r,u){if(typeof t.by=="string"){let e=t.by;return(r==null?void 0:r[e])===(u==null?void 0:u[e])}return t.by(r,u)},defaultValue:O(()=>t.defaultValue),nullable:i,inputRef:d,labelRef:a,buttonRef:v,optionsRef:s,disabled:O(()=>t.disabled),options:m,change(r){k(r)},activeOptionIndex:O(()=>{if(E.value&&w.value===null&&m.value.length>0){let r=m.value.findIndex(u=>!u.dataRef.disabled);r!==-1&&(w.value=r)}return w.value}),activationTrigger:D,optionsPropsRef:f,closeCombobox(){E.value=!1,!t.disabled&&l.value!==1&&(l.value=1,w.value=null)},openCombobox(){if(E.value=!0,t.disabled||l.value===0)return;let r=m.value.findIndex(u=>{let e=B(u.dataRef.value);return Y(x.value,{[0]:()=>V.compare(B(V.value.value),B(e)),[1]:()=>B(V.value.value).some(y=>V.compare(B(y),B(e)))})});r!==-1&&(w.value=r),l.value=0},goToOption(r,u,e){if(E.value=!1,t.disabled||s.value&&!f.value.static&&l.value===1)return;let y=h();if(y.activeOptionIndex===null){let C=y.options.findIndex(n=>!n.dataRef.disabled);C!==-1&&(y.activeOptionIndex=C)}let S=it(r===L.Specific?{focus:L.Specific,id:u}:{focus:r},{resolveItems:()=>y.options,resolveActiveIndex:()=>y.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});w.value=S,D.value=e??1,m.value=y.options},selectOption(r){let u=m.value.find(y=>y.id===r);if(!u)return;let{dataRef:e}=u;k(Y(x.value,{[0]:()=>e.value,[1]:()=>{let y=B(V.value.value).slice(),S=B(e.value),C=y.findIndex(n=>V.compare(S,B(n)));return C===-1?y.push(S):y.splice(C,1),y}}))},selectActiveOption(){if(V.activeOptionIndex.value===null)return;let{dataRef:r,id:u}=m.value[V.activeOptionIndex.value];k(Y(x.value,{[0]:()=>r.value,[1]:()=>{let e=B(V.value.value).slice(),y=B(r.value),S=e.findIndex(C=>V.compare(y,B(C)));return S===-1?e.push(y):e.splice(S,1),e}})),V.goToOption(L.Specific,u)},registerOption(r,u){let e={id:r,dataRef:u},y=h(S=>[...S,e]);if(w.value===null){let S=u.value.value;Y(x.value,{[0]:()=>V.compare(B(V.value.value),B(S)),[1]:()=>B(V.value.value).some(C=>V.compare(B(C),B(S)))})&&(y.activeOptionIndex=y.options.indexOf(e))}m.value=y.options,w.value=y.activeOptionIndex,D.value=1,y.options.some(S=>!N(S.dataRef.domRef))&&requestAnimationFrame(()=>{let S=h();m.value=S.options,w.value=S.activeOptionIndex})},unregisterOption(r){var u;V.activeOptionIndex.value!==null&&((u=V.options.value[V.activeOptionIndex.value])==null?void 0:u.id)===r&&(E.value=!0);let e=h(y=>{let S=y.findIndex(C=>C.id===r);return S!==-1&&y.splice(S,1),y});m.value=e.options,w.value=e.activeOptionIndex,D.value=1}};et([d,v,s],()=>V.closeCombobox(),O(()=>l.value===0)),$e(Oe,V),tt(O(()=>Y(l.value,{[0]:ce.Open,[1]:ce.Closed})));let q=O(()=>V.activeOptionIndex.value===null?null:m.value[V.activeOptionIndex.value].dataRef.value),z=O(()=>{var r;return(r=N(d))==null?void 0:r.closest("form")});return ge(()=>{fe([z],()=>{if(!z.value||t.defaultValue===void 0)return;function r(){V.change(t.defaultValue)}return z.value.addEventListener("reset",r),()=>{var u;(u=z.value)==null||u.removeEventListener("reset",r)}},{immediate:!0})}),()=>{let{name:r,disabled:u,form:e,...y}=t,S={open:l.value===0,disabled:u,activeIndex:V.activeOptionIndex.value,activeOption:q.value,value:R.value};return he(M,[...r!=null&&R.value!=null?Ye({[r]:R.value}).map(([C,n])=>he(ut,at({features:dt.Hidden,key:C,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,name:C,value:n}))):[],ne({theirProps:{...p,...Re(y,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:S,slots:c,attrs:p,name:"Combobox"})])}}}),bt=se({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${me()}`}},setup(t,{attrs:c,slots:p,expose:g}){let l=re("ComboboxButton");g({el:l.buttonRef,$el:l.buttonRef});function a(s){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(s.preventDefault(),l.openCombobox()),ee(()=>{var f;return(f=N(l.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function d(s){switch(s.key){case K.ArrowDown:s.preventDefault(),s.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case K.ArrowUp:s.preventDefault(),s.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),ee(()=>{l.value.value||l.goToOption(L.Last)})),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case K.Escape:if(l.comboboxState.value!==0)return;s.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&s.stopPropagation(),l.closeCombobox(),ee(()=>{var f;return(f=l.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let v=st(O(()=>({as:t.as,type:c.type})),l.buttonRef);return()=>{var s,f;let m={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{id:w,...D}=t,E={ref:l.buttonRef,id:w,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(s=N(l.optionsRef))==null?void 0:s.id,"aria-expanded":l.disabled.value?void 0:l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(f=N(l.labelRef))==null?void 0:f.id,w].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:d,onClick:a};return ne({ourProps:E,theirProps:D,slot:m,attrs:c,slots:p,name:"ComboboxButton"})}}}),gt=se({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${me()}`}},emits:{change:t=>!0},setup(t,{emit:c,attrs:p,slots:g,expose:l}){let a=re("ComboboxInput"),d={value:!1};l({el:a.inputRef,$el:a.inputRef});let v=O(()=>{var i;let R=a.value.value;return N(a.inputRef)?typeof t.displayValue<"u"&&R!==void 0?(i=t.displayValue(R))!=null?i:"":typeof R=="string"?R:"":""});ge(()=>{fe([v,a.comboboxState],([i,R],[k,V])=>{if(d.value)return;let q=N(a.inputRef);q&&(V===0&&R===1||i!==k)&&(q.value=i)},{immediate:!0}),fe([a.comboboxState],([i],[R])=>{if(i===0&&R===1){let k=N(a.inputRef);if(!k)return;let V=k.value,{selectionStart:q,selectionEnd:z,selectionDirection:r}=k;k.value="",k.value=V,r!==null?k.setSelectionRange(q,z,r):k.setSelectionRange(q,z)}})});let s=_(!1),f=_(null);function m(){s.value=!0}function w(){Qe().nextFrame(()=>{s.value=!1,f.value&&(a.openCombobox(),c("change",f.value),f.value=null)})}function D(i){switch(d.value=!0,i.key){case K.Backspace:case K.Delete:if(a.mode.value!==0||!a.nullable.value)return;let R=i.currentTarget;requestAnimationFrame(()=>{if(R.value===""){a.change(null);let k=N(a.optionsRef);k&&(k.scrollTop=0),a.goToOption(L.Nothing)}});break;case K.Enter:if(d.value=!1,a.comboboxState.value!==0||s.value)return;if(i.preventDefault(),i.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case K.ArrowDown:return d.value=!1,i.preventDefault(),i.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Next),[1]:()=>a.openCombobox()});case K.ArrowUp:return d.value=!1,i.preventDefault(),i.stopPropagation(),Y(a.comboboxState.value,{[0]:()=>a.goToOption(L.Previous),[1]:()=>{a.openCombobox(),ee(()=>{a.value.value||a.goToOption(L.Last)})}});case K.Home:if(i.shiftKey)break;return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case K.PageUp:return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.First);case K.End:if(i.shiftKey)break;return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case K.PageDown:return d.value=!1,i.preventDefault(),i.stopPropagation(),a.goToOption(L.Last);case K.Escape:if(d.value=!1,a.comboboxState.value!==0)return;i.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&i.stopPropagation(),a.closeCombobox();break;case K.Tab:if(d.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function E(i){if(s.value){f.value=i;return}a.openCombobox(),c("change",i)}function h(){d.value=!1}let x=O(()=>{var i,R,k,V;return(V=(k=(R=t.defaultValue)!=null?R:a.defaultValue.value!==void 0?(i=t.displayValue)==null?void 0:i.call(t,a.defaultValue.value):null)!=null?k:a.defaultValue.value)!=null?V:""});return()=>{var i,R,k,V,q,z;let r={open:a.comboboxState.value===0},{id:u,displayValue:e,onChange:y,...S}=t,C={"aria-controls":(i=a.optionsRef.value)==null?void 0:i.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(R=a.options.value[a.activeOptionIndex.value])==null?void 0:R.id,"aria-labelledby":(q=(k=N(a.labelRef))==null?void 0:k.id)!=null?q:(V=N(a.buttonRef))==null?void 0:V.id,"aria-autocomplete":"list",id:u,onCompositionstart:m,onCompositionend:w,onKeydown:D,onInput:E,onBlur:h,role:"combobox",type:(z=p.type)!=null?z:"text",tabIndex:0,ref:a.inputRef,defaultValue:x.value,disabled:a.disabled.value===!0?!0:void 0};return ne({ourProps:C,theirProps:S,slot:r,attrs:p,slots:g,features:pe.RenderStrategy|pe.Static,name:"ComboboxInput"})}}}),xt=se({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:c,slots:p,expose:g}){let l=re("ComboboxOptions"),a=`headlessui-combobox-options-${me()}`;g({el:l.optionsRef,$el:l.optionsRef}),be(()=>{l.optionsPropsRef.value.static=t.static}),be(()=>{l.optionsPropsRef.value.hold=t.hold});let d=lt(),v=O(()=>d!==null?(d.value&ce.Open)===ce.Open:l.comboboxState.value===0);return rt({container:O(()=>N(l.optionsRef)),enabled:O(()=>l.comboboxState.value===0),accept(s){return s.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}}),()=>{var s,f,m;let w={open:l.comboboxState.value===0},D={"aria-labelledby":(m=(s=N(l.labelRef))==null?void 0:s.id)!=null?m:(f=N(l.buttonRef))==null?void 0:f.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0},E=Re(t,["hold"]);return ne({ourProps:D,theirProps:E,slot:w,attrs:c,slots:p,features:pe.RenderStrategy|pe.Static,visible:v.value,name:"ComboboxOptions"})}}}),yt=se({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:c,attrs:p,expose:g}){let l=re("ComboboxOption"),a=`headlessui-combobox-option-${me()}`,d=_(null);g({el:d,$el:d});let v=O(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===a:!1),s=O(()=>Y(l.mode.value,{[0]:()=>l.compare(B(l.value.value),B(t.value)),[1]:()=>B(l.value.value).some(i=>l.compare(B(i),B(t.value)))})),f=O(()=>({disabled:t.disabled,value:t.value,domRef:d}));ge(()=>l.registerOption(a,f)),Te(()=>l.unregisterOption(a)),be(()=>{l.comboboxState.value===0&&v.value&&l.activationTrigger.value!==0&&ee(()=>{var i,R;return(R=(i=N(d))==null?void 0:i.scrollIntoView)==null?void 0:R.call(i,{block:"nearest"})})});function m(i){if(t.disabled)return i.preventDefault();l.selectOption(a),l.mode.value===0&&l.closeCombobox(),Ke()||requestAnimationFrame(()=>{var R;return(R=N(l.inputRef))==null?void 0:R.focus()})}function w(){if(t.disabled)return l.goToOption(L.Nothing);l.goToOption(L.Specific,a)}let D=nt();function E(i){D.update(i)}function h(i){D.wasMoved(i)&&(t.disabled||v.value||l.goToOption(L.Specific,a,0))}function x(i){D.wasMoved(i)&&(t.disabled||v.value&&(l.optionsPropsRef.value.hold||l.goToOption(L.Nothing)))}return()=>{let{disabled:i}=t,R={active:v.value,selected:s.value,disabled:i},k={id:a,ref:d,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":s.value,disabled:void 0,onClick:m,onFocus:w,onPointerenter:E,onMouseenter:E,onPointermove:h,onMousemove:h,onPointerleave:x,onMouseleave:x};return ne({ourProps:k,theirProps:t,slot:R,attrs:p,slots:c,name:"ComboboxOption"})}}});const ae=t=>!(t===""||t===null),ht=t=>{let c=/^[0-9]+$/;return!!t.match(c)},wt=(t,c)=>t.length<=c,Vt=t=>{let c=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!t.match(c)},_t=["disabled","id","value","name"],St=["for"],Ie={__name:"RadioGroupForm",props:{questionId:String,options:Array,isDisabled:Boolean,modelValue:{type:[Number,Object,String,Array],default:null}},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(!0),j(M,null,xe(t.options,(d,v)=>(b(),j("div",{key:d.title,class:"flex items-center my-3"},[Pe(o("input",{disabled:t.isDisabled,id:`radio-${v}${t.questionId}`,type:"radio",value:d.id,"onUpdate:modelValue":a[0]||(a[0]=s=>g.value=s),name:`name-${v}${t.questionId}`,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,_t),[[Ee,g.value]]),o("label",{for:`radio-${v}${t.questionId}`,class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300 first-letter:uppercase"},I(d.title),9,St)]))),128))}},Rt={class:"grid grid-cols-4"},kt={class:"col-span-4 text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},Ot={class:"text-red-700"},It={class:"w-full text-start first-letter:uppercase"},Ct={class:"text-xs text-gray-600"},Dt={class:"relative col-span-4 mt-1 rounded-md ms-4"},$t={class:"col-span-4 text-end"},Tt={class:"text-xs text-red-600"},Ut={__name:"OneSelection",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},isDisabled:Boolean,placeholder:String,question:Object,helperText:String},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",Rt,[o("div",kt,[G(I(t.question.statement)+" ",1),o("span",Ot,I(t.question.isRequired==="true"?"*":""),1)]),o("div",It,[o("span",Ct,I(t.question.helpQuestion),1)]),o("div",Dt,[P(Ie,{isDisabled:t.isDisabled,questionId:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["isDisabled","questionId","options","modelValue"])]),o("div",$t,[o("span",Tt,I((d=t.question.error)==null?void 0:d.text),1)])])}}},Pt={class:"grid grid-cols-4"},Et={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},At={class:"text-red-600 font-mono"},jt={class:"relative mt-1 rounded-md col-span-4 ps-4"},Bt={class:"col-span-4 text-end"},Ft={class:"text-xs text-red-600"},Nt={__name:"MultipleSelection",props:{modelValue:{type:[Array,String]},question:Object},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>{var l;return Array.isArray(p.modelValue)?p.modelValue:(l=p.modelValue)==null?void 0:l.split(",")},set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",Pt,[o("label",Et,[G(I(t.question.statement)+" ",1),o("span",At,I(t.question.isRequired==="true"?"*":""),1)]),o("div",jt,[P(Ze,{questionIndex:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["questionIndex","options","modelValue"])]),o("div",Bt,[o("span",Ft,I((d=t.question.error)==null?void 0:d.text),1)])])}}},Lt={class:"relative mt-1 first-letter:uppercase"},Mt={class:"block text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},qt={class:"relative w-full cursor-default overflow-hidden sm:text-sm"},zt={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},oe={__name:"HAutoComplete",props:{itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"title"},modelValue:{type:[String,Number,Object],default:null},items:{type:Array,required:!0},label:{type:String},error:{type:Boolean,default:!1},placeholder:{type:String},isDisabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:c}){const p=t;_(!0);const g=O({get:()=>p.modelValue,set:v=>c("update:modelValue",v)});let l=_(""),a=_(!1),d=O(()=>l.value===""?[]:p.items.filter(v=>v[`${p.itemTitle}`].toLowerCase().replace(/\s+/g,"").includes(l.value.toLowerCase().replace(/\s+/g,""))));return(v,s)=>(b(),$(A(ft),{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=f=>g.value=f)},{default:F(()=>[o("div",Lt,[o("label",Mt,I(t.label),1),o("div",qt,[P(A(gt),{class:le([t.error&&A(a)&&!g.value?"ring-red-600":"ring-gray-300","capitalize w-full bg-gray-50 border-gray-300 border-none p-2.5 text-sm leading-5 text-gray-900 ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 rounded-md"]),displayValue:f=>f==null?void 0:f[`${t.itemTitle}`],onChange:s[0]||(s[0]=f=>we(l)?l.value=f.target.value:l=f.target.value),placeholder:t.placeholder},null,8,["class","displayValue","placeholder"]),P(A(bt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:F(()=>[P(A(Je),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),P(A(Ge),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:s[1]||(s[1]=f=>we(l)?l.value="":l="")},{default:F(()=>[P(A(xt),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:F(()=>[A(d).length===0&&A(l)!==""?(b(),j("div",zt," Sin datos ")):J("",!0),(b(!0),j(M,null,xe(A(d),f=>(b(),$(A(yt),{as:"template",key:f[`${t.itemValue}`],value:f,disabled:t.isDisabled},{default:F(({selected:m,active:w})=>[o("li",{class:le(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":w,"text-gray-900":!w}])},[o("span",{class:le(["block truncate first-letter:uppercase",{"font-medium":m,"font-normal":!m}])},I(f[`${t.itemTitle}`]),3),m?(b(),j("span",{key:0,class:le(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":w,"text-teal-600":!w}])},[P(A(We),{class:"h-5 w-5","aria-hidden":"true"})],2)):J("",!0)],2)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Qt={class:"block text-sm font-medium leading-6 text-gray-900 first-letter:uppercase"},Kt={class:"text-red-600 font-mono"},Gt={class:"grid grid-cols-3 gap-x-5"},Ht={class:"col-span-3 mt-2"},Xt={__name:"UbigeoOtherForm",props:{modelValue:[Number,Object,String,Array],question:[Object,Array],isReadonly:Boolean,error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:c}){const p=t,g=new ke,l=O({get:()=>p.modelValue,set:h=>c("update:modelValue",h)}),a=_([]),d=_([]),v=_([]),s=_({departamento:null,provincia:null,distrito:null}),f=async h=>{s.value.provincia=null,d.value=[],s.value.distrito=null,v.value=[],d.value=await g.getProvincias(h.code),c("update:modelValue",null)},m=async h=>{c("update:modelValue",null),v.value=[],s.value.distrito=null,v.value=await g.getDistritos(h.code)},w=async h=>{let x=await g.getUbigeo(h[0]);s.value.departamento={code:x.idDepartment,title:x.department},s.value.provincia={code:x.idProvince,title:x.province},s.value.distrito={code:x.idDistrict,title:x.district},p.question.other=h[1]},D=async()=>{a.value.length==0&&(a.value=await g.getDepartamentos())};return(async()=>{let h=l.value;h&&(h=h.split("%%%",2),await w(h))})(),(h,x)=>(b(),j(M,null,[o("label",Qt,[G(I(t.question.statement)+" ",1),o("span",Kt,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Gt,[o("div",null,[P(oe,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:D,itemValue:"code",modelValue:s.value.departamento,"onUpdate:modelValue":[x[0]||(x[0]=i=>s.value.departamento=i),f]},null,8,["error","items","modelValue"])]),o("div",null,[P(oe,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:s.value.provincia,"onUpdate:modelValue":[x[1]||(x[1]=i=>s.value.provincia=i),m]},null,8,["error","items","modelValue"])]),o("div",null,[P(oe,{error:t.error,items:v.value,itemValue:"code",placeholder:"Distrito",modelValue:s.value.distrito,"onUpdate:modelValue":[x[2]||(x[2]=i=>s.value.distrito=i),x[3]||(x[3]=i=>l.value=i.code)]},null,8,["error","items","modelValue"])]),o("div",Ht,[P(te,{"is-required":t.question.isRequired==="true",helperText:t.question.helpQuestion,modelValue:t.question.other,"onUpdate:modelValue":x[4]||(x[4]=i=>t.question.other=i),label:"Dirección"},null,8,["is-required","helperText","modelValue"])])])],64))}},Yt={class:"block text-sm font-medium leading-6 text-gray-900 capitalize"},Zt={class:"text-red-600 font-mono"},Jt={class:"grid grid-cols-3 gap-5"},Wt={__name:"UbigeoForm",props:{modelValue:[String,Number,Object,Array],question:[Object,Array],isReadonly:Boolean,error:{type:Boolean,default:!1}},emits:["update:modelValue","clickInput"],setup(t,{emit:c}){const p=t,g=new ke,l=O({get:()=>p.modelValue,set:h=>c("update:modelValue",h)}),a=_([]),d=_([]),v=_([]),s=_({departamento:null,provincia:null,distrito:null}),f=async h=>{s.value.provincia=null,d.value=[],s.value.distrito=null,v.value=[],d.value=await g.getProvincias(h.code),c("update:modelValue",null)},m=async h=>{c("update:modelValue",null),v.value=[],s.value.distrito=null,v.value=await g.getDistritos(h.code)},w=async()=>{a.value=await g.getDepartamentos()},D=async h=>{let x=await g.getUbigeo(h);s.value.departamento={code:x.idDepartment,title:x.department},s.value.provincia={code:x.idProvince,title:x.province},s.value.distrito={code:x.idDistrict,title:x.district}};return(async()=>{l.value&&await D(l.value)})(),(h,x)=>(b(),j(M,null,[o("label",Yt,[G(I(t.question.statement)+" ",1),o("span",Zt,I(t.question.isRequired==="true"?"*":""),1)]),o("div",Jt,[o("div",null,[P(oe,{placeholder:"Departamento",error:t.error,items:a.value,onMouseup:w,itemValue:"code",modelValue:s.value.departamento,"onUpdate:modelValue":[x[0]||(x[0]=i=>s.value.departamento=i),f],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[P(oe,{error:t.error,items:d.value,itemValue:"code",placeholder:"Provincia",modelValue:s.value.provincia,"onUpdate:modelValue":[x[1]||(x[1]=i=>s.value.provincia=i),m],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])]),o("div",null,[P(oe,{error:t.error,items:v.value,itemValue:"code",placeholder:"Distrito",modelValue:s.value.distrito,"onUpdate:modelValue":[x[2]||(x[2]=i=>s.value.distrito=i),x[3]||(x[3]=i=>l.value=i.code)],isDisabled:t.isReadonly},null,8,["error","items","modelValue","isDisabled"])])])],64))}},ea={__name:"StudyCycleForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:a=>c("update:modelValue",a)}),l=[{id:1,title:"Semestre I"},{id:2,title:"Semestre II    "},{id:3,title:"Semestre III"},{id:4,title:"Semestre IV"},{id:5,title:"Semestre V"},{id:6,title:"Semestre VI"},{id:7,title:"Semestre VII"},{id:8,title:"Semestre VIII"},{id:9,title:"Semestre IX"},{id:10,title:"Semestre X"},{id:11,title:"Semestre XI"},{id:12,title:"Semestre XII"}];return(a,d)=>(b(),$(ve,{isDisabled:t.isDisabled,isRequired:t.question.isRequired==="true",modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=v=>g.value=v),label:t.question.statement,error:t.question.error,options:l},null,8,["isDisabled","isRequired","modelValue","label","error"]))}},ta=[{id:"001",title:"trabajo social"},{id:"003",title:"medicina veterinaria y zootecnía"},{id:"004",title:"medicina humana"},{id:"005",title:"ingeniería química"},{id:"006",title:"ingeniería mecánica, eléctrica, electrónica y sistemas"},{id:"007",title:"ingeniería geológica y metalúrgica"},{id:"008",title:"ingeniería estadística e informática"},{id:"009",title:"ingeniería económica"},{id:"010",title:"ingeniería de minas"},{id:"011",title:"ingeniería civil y arquitectura"},{id:"012",title:"ingeniería agrícola"},{id:"013",title:"ciencias sociales"},{id:"014",title:"enfermería"},{id:"015",title:"ciencias jurídicas y políticas"},{id:"016",title:"ciencias de la salud"},{id:"017",title:"ciencias de la educación"},{id:"018",title:"ciencias contables y administrativas"},{id:"019",title:"ciencias biológicas"},{id:"020",title:"ciencias agrarias"}],aa={__name:"FacuForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(),$(ve,{isDisabled:t.isDisabled,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=d=>g.value=d),label:t.question.statement,error:t.question.error,options:A(ta)},null,8,["isDisabled","modelValue","label","error","options"]))}},la=[{id:"001",title:"administración"},{id:"002",title:"antropología"},{id:"003",title:"arquitectura y urbanismo"},{id:"004",title:"arte: artes plásticas"},{id:"005",title:"arte: danza"},{id:"006",title:"arte: música"},{id:"007",title:"arte: teatro"},{id:"008",title:"biología: ecología"},{id:"009",title:"biología: microbiología y laboratorio clínico"},{id:"010",title:"biología: pesquería"},{id:"011",title:"ciencias contables"},{id:"012",title:"ciencias de la comunicación social"},{id:"013",title:"ciencias físico matemáticas: física"},{id:"014",title:"ciencias físico matemáticas: matemáticas"},{id:"015",title:"derecho"},{id:"034",title:"educación física"},{id:"035",title:"educación inicial"},{id:"036",title:"educación primaria"},{id:"037",title:"educación secundaria de la especialidad de ciencia, tecnología y ambiente"},{id:"038",title:"educación secundaria de la especialidad de ciencias sociales"},{id:"039",title:"educación secundaria de la especialidad de lengua, literatura, psicología y filosofía"},{id:"040",title:"educación secundaria de la especialidad de matemática, física, computación e informática"},{id:"041",title:"enfermería"},{id:"042",title:"ingeniería agrícola"},{id:"043",title:"ingeniería agroindustrial"},{id:"044",title:"ingeniería agronómica"},{id:"045",title:"ingeniería civil"},{id:"046",title:"ingeniería de minas"},{id:"047",title:"ingeniería de sistemas"},{id:"048",title:"ingeniería económica"},{id:"049",title:"ingeniería electrónica"},{id:"050",title:"ingeniería estadística e informática"},{id:"051",title:"ingeniería geológica"},{id:"052",title:"ingeniería mecánica eléctrica"},{id:"053",title:"ingeniería metalúrgica"},{id:"054",title:"ingeniería química"},{id:"055",title:"ingeniería topográfica y agrimensura"},{id:"169",title:"medicina humana"},{id:"170",title:"medicina veterinaria y zootecnía"},{id:"171",title:"nutrición humana"},{id:"172",title:"odontología"},{id:"231",title:"sociología"},{id:"232",title:"trabajo social"},{id:"233",title:"turismo"}],oa={__name:"ProStudyForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object,isDisabled:Boolean},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>(b(),$(ve,{isDisabled:t.isDisabled,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=d=>g.value=d),label:t.question.statement,error:t.question.error,options:A(la)},null,8,["isDisabled","modelValue","label","error","options"]))}},ia={class:"grid grid-cols-4"},sa={for:"price",class:"col-span-4 text-sm font-medium leading-6 text-gray-900 capitalize"},na={class:"text-red-600 font-mono"},ra={class:"relative col-span-4 mt-1 rounded-md ms-4"},ua={class:"col-span-4"},da={class:"col-span-4 text-end"},ca={class:"text-xs text-red-600"},pa={__name:"OneSelectionOtherForm",props:{modelValue:[Number,Object,String,Array],label:String,type:{default:"text",type:String},placeholder:String,question:Object},emits:["update:modelValue"],setup(t,{emit:c}){const p=t,g=O({get:()=>p.modelValue,set:l=>c("update:modelValue",l)});return(l,a)=>{var d;return b(),j("div",ia,[o("label",sa,[G(I(t.question.statement)+" ",1),o("span",na,I(t.question.isRequired==="true"?"*":""),1)]),o("div",ra,[P(Ie,{questionId:t.question.id,options:t.question.options,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=v=>g.value=v)},null,8,["questionId","options","modelValue"])]),o("div",ua,[P(te,{modelValue:t.question.answer.text,"onUpdate:modelValue":a[1]||(a[1]=v=>t.question.answer.text=v),label:"Especifique"},null,8,["modelValue"])]),o("div",da,[o("span",ca,I((d=t.question.error)==null?void 0:d.text),1)])])}}},va={class:"grid grid-cols-2 mt-4 bg-white mx-auto justify-center"},ma={class:"col-span-2 rounded-lg"},fa=["id"],ba={class:"w-full text-end"},ga={class:"text-xs text-red-600"},xa={class:"w-full text-end"},ya={class:"text-xs text-red-600"},ha={class:"flex justify-end mt-4"},wa={__name:"Form",props:{questions:Array,section:Object},emits:["onSuccess","onFaild"],setup(t,{emit:c}){const p=t,g=Ae(),l=new Se,a=_(null),d=_({show:!1,text:null,type:"success"}),v=O(()=>p.questions),s=_(!0),f=r=>{v.value.map(u=>(u.isDependent==r.id&&(u.optionTrigger===r.answer.options||u.optionTrigger===null?u.show=!0:(u.answer=[],u.show=!1)),u))},m=(r,u,e=!1)=>{e&&f(u),u.isRequired==="true"&&w(r,u)},w=(r,u)=>{v.value.map(e=>{e.id===u.id&&(ae(r)?u.isRequired==="false"&&!ae(r)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Obligatorio"},s.value=!1))})},D=(r,u)=>{v.value.map(e=>{e.id==u.id&&(u.isRequired==="true"&&!ae(r)?(e.error={isError:!0,text:"Obligatorio"},s.value=!1):u.isRequired==="false"&&!ae(r)?(e.error={isError:!1,text:null},s.value=!0):Vt(r)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Formato no valido"},s.value=!1))})},E=(r,u)=>{v.value.map(e=>{e.id==u.id&&(ae(r)?ht(r)?u.isRequired==="false"&&!ae(r)?(e.error={isError:!1,text:null},s.value=!0):wt(r,9)?(e.error={isError:!1,text:null},s.value=!0):(e.error={isError:!0,text:"Longitud debe se 9 digitos"},s.value=!1):(e.error={isError:!0,text:"Solo se permite numeros"},s.value=!1):(e.error={isError:!0,text:"Obligatorio"},s.value=!1))})},h=["78ae9492-a909-459f-ba53-15165c884d87","d2574937-e2fc-4eb5-b612-d767e3610a04","fb5c10df-f60d-4815-a007-a189e879054e","e8367e12-f088-4188-bed8-50342bac562c","c9175462-8e03-47b1-9450-2f126a1655c2","de9c81d9-87d5-4cf4-b2f0-5274399ff94c","a3056caa-84a9-44a0-9ee5-46a59ad3f073","ab123cd2-c64d-44d2-8023-af2849bf6f9d","bd4313bd-1709-4bfd-8fae-bfe2eb6e5d05","16373178-2cb7-4a9e-be10-33d1145fcb48","b37c3cce-8d8a-45e3-90bd-59e0bcb9cccb","50af5759-8009-4419-bfc2-8df851be62b1","4d36be9a-1567-4d80-a726-a5a1bc2a33c7","36f9a47d-457d-4052-ab25-47b4decb887f","574ba955-5176-4997-8e34-42524cafa862","6bc3b523-2a89-423d-99bf-53692c004633"],x=["78ae9492-a909-459f-ba53-15165c884d87","d2574937-e2fc-4eb5-b612-d767e3610a04","fb5c10df-f60d-4815-a007-a189e879054e","e8367e12-f088-4188-bed8-50342bac562c","c9175462-8e03-47b1-9450-2f126a1655c2","de9c81d9-87d5-4cf4-b2f0-5274399ff94c","a3056caa-84a9-44a0-9ee5-46a59ad3f073","ab123cd2-c64d-44d2-8023-af2849bf6f9d","bd4313bd-1709-4bfd-8fae-bfe2eb6e5d05","16373178-2cb7-4a9e-be10-33d1145fcb48","85c4a938-b006-45a8-bdbd-1c4223656ab6","50af5759-8009-4419-bfc2-8df851be62b1","4d36be9a-1567-4d80-a726-a5a1bc2a33c7","36f9a47d-457d-4052-ab25-47b4decb887f","574ba955-5176-4997-8e34-42524cafa862","6bc3b523-2a89-423d-99bf-53692c004633"],i=O(()=>g.currentUser?x:h),R=()=>{let r={section_:p.section.id,answers_:[]};const u=[1,2,3,5,8,9,10,20,50],e=[0,4],y=[6],S=[11],C=[30];return v.value.forEach(n=>{var ue;if((!n.isDependent||n.show)&&!i.value.includes(n.id))if(u.includes(n.type))r.answers_.push({qst_:n.id,opts_:null,txt_:n.answer.text});else if(e.includes(n.type))r.answers_.push({qst_:n.id,opts_:[n.answer.options],txt_:null});else if(y.includes(n.type))r.answers_.push({qst_:n.id,opts_:Array.isArray(n.answer.options)?n.answer.options:(ue=n.answer.options)==null?void 0:ue.split(","),txt_:null});else if(S.includes(n.type)){let ye=n.answer.text.split("%%%",2);r.answers_.push({qst_:n.id,opts_:null,txt_:ye[0]+"%%%"+n.other})}else C.includes(n.type)&&r.answers_.push({qst_:n.id,opts_:[n.answer.options],txt_:n.answer.text})}),r},k=_([]),V=()=>{var r=0;return k.value=[],v.value.forEach(u=>{var e,y,S,C,n;!((e=u.answer)!=null&&e.text)&&((y=u.answer)!=null&&y.options&&Array.isArray((S=u.answer)==null?void 0:S.options)&&((C=u.answer)==null?void 0:C.options.length)===0||!((n=u.answer)!=null&&n.options))&&u.isRequired==="true"&&(!u.isDependent||u.show)?(u.error={isError:!0,text:"Obligatorio"},k.value.push(u.id),r++):u.error={isError:!1,text:null}}),!(r>0)},q=async()=>{if(V()){let u=R(),e=await l.saveSection(u);return d.value.show=!0,d.value.text="Datos actualizados",d.value.type="success",c("onSuccess",d.value),e}return document.getElementById(k.value[0]).scrollIntoView("smooth"),console.error("Error ..."),d.value.show=!0,d.value.text="Responda las preguntas de manera correcta",d.value.type="danger",c("onFaild",d.value),!1};return(async()=>{v.value.forEach(r=>{f(r)})})(),(r,u)=>(b(),j("div",va,[o("div",ma,[o("ul",{ref_key:"refList",ref:a,class:""},[(b(!0),j(M,null,xe(v.value,(e,y)=>{var S,C;return b(),j("li",{key:e.id,id:e.id,class:le([!e.isDependent||e.show?"pt-2 pb-5":"",e.show?"bg-slate-50  -mt-3 px-4 pt-2 rounded-lg":""])},[!e.isDependent||e.show?(b(),j(M,{key:0},[e.type===0?(b(),$(Ut,{key:0,isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,!0)]},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])):e.type===1?(b(),$(te,{key:1,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e)],type:"text",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===2?(b(),$(te,{key:2,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e)],type:"date",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===3?(b(),$(te,{key:3,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],type:"number",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===50?(b(),$(ea,{key:4,isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isDisabled","question","modelValue","onUpdate:modelValue"])):e.type===21?(b(),$(aa,{key:5,isRequired:e.isRequired==="true",isDisabled:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isRequired","isDisabled","question","modelValue","onUpdate:modelValue"])):J("",!0),e.type===30?(b(),$(pa,{key:6,question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,!0)]},null,8,["question","modelValue","onUpdate:modelValue"])):e.type===20?(b(),$(oa,{key:7,isDisabled:i.value.includes(e.id),isRequired:e.isRequired==="true",question:e,modelValue:e.answer.text,"onUpdate:modelValue":n=>e.answer.text=n},null,8,["isDisabled","isRequired","question","modelValue","onUpdate:modelValue"])):e.type===4?(b(),$(ve,{key:8,isRequired:e.isRequired==="true",modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(n,e,y)],label:e.statement,error:e.error},null,8,["isRequired","modelValue","onUpdate:modelValue","label","error"])):e.type===6?(b(),$(Nt,{key:9,question:e,modelValue:e.answer.options,"onUpdate:modelValue":[n=>e.answer.options=n,n=>m(n,e,y)]},null,8,["question","modelValue","onUpdate:modelValue"])):e.type===8?(b(),$(te,{key:10,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>D(n,e)],type:"email",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===9?(b(),$(te,{key:11,helperText:e.helpQuestion,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>E(n,e)],type:"tel",isRequired:e.isRequired==="true",label:e.statement,error:e.error},null,8,["helperText","isReadonly","modelValue","onUpdate:modelValue","isRequired","label","error"])):e.type===10?(b(),j(M,{key:12},[P(Wt,{question:e,isReadonly:i.value.includes(e.id),modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],error:!!e.error},null,8,["question","isReadonly","modelValue","onUpdate:modelValue","error"]),o("div",ba,[o("span",ga,I((S=e.error)==null?void 0:S.text),1)])],64)):e.type===11?(b(),j(M,{key:13},[P(Xt,{isReadonly:i.value.includes(e.id),question:e,modelValue:e.answer.text,"onUpdate:modelValue":[n=>e.answer.text=n,n=>m(e.answer,e)],error:!!e.error},null,8,["isReadonly","question","modelValue","onUpdate:modelValue","error"]),o("div",xa,[o("span",ya,I((C=e.error)==null?void 0:C.text),1)])],64)):J("",!0)],64)):J("",!0)],10,fa)}),128))],512),o("div",ha,[je(r.$slots,"footer",{submit:q})])])]))}};const Va={class:"z-10 fixed right-2 top-1/2 block md:hidden"},_a=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})],-1),Sa={class:"text-sm sm:text-xl uppercase font-bold p-5 text-blue-950"},Ra={class:"grid grid-cols-4 gap-4"},ka=o("strong",null," Indicaciones: ",-1),Oa=o("p",null," Estudiantes Universitarios. Lea y responda todos los ítems de manera obligatoria, verídica y detallada. ",-1),Ia=o("p",null," Los datos consignados son confidenciales (Según ley de protección de datos personales). ",-1),Ca={class:"col-span-4 lg:col-span-1 hidden md:block"},Da={class:"col-span-4 lg:col-span-3 rounded-lg bg-white p-6 shadow-lg mb-4"},$a={class:"text-3xl font-semibold mb-4 text-gray-700 first-letter:uppercase"},Ta={class:"text-xl font-light uppercase flex items-center underline underline-offset-8 text-blue-800"},Ua=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 me-2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"})],-1),Pa={key:0,class:"text-center text-lg uppercase font-extrabold text-gray-400 align-items-center"},Ea={class:"grid md:grid-cols-2 w-full gap-4"},Aa={class:"previous"},ja={class:"flex items-center justify-start"},Ba=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center me-4 rotate-180"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),Fa={class:"text-start"},Na=o("p",{class:"font-light"},"Anterior",-1),La={class:"font-semibold text-lg first-letter:uppercase pb-0"},Ma={class:"flex items-center justify-start"},qa=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center me-4 rotate-180"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),za={class:"text-start"},Qa=o("p",{class:"font-light"},"Anterior",-1),Ka={class:"font-semibold text-lg first-letter:uppercase pb-0"},Ga={class:"nexts"},Ha={class:"flex items-center justify-end"},Xa={class:"text-end"},Ya={class:"font-light"},Za={class:"uppercase"},Ja={class:"font-semibold text-lg first-letter:uppercase pb-0"},Wa=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center ms-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),el={class:"flex items-center justify-end"},tl={class:"text-end"},al={class:"font-light"},ll={class:"uppercase"},ol={class:"font-semibold text-lg first-letter:uppercase pb-0"},il=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 self-center ms-4"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1),sl=o("div",{class:"text-end"},[o("span",null," Guardar "),o("h5",{class:"text-lg first-letter:uppercase"}," Finalizar ")],-1),nl={class:"text-end"},rl={class:"flex items-center justify-end"},ul={class:"text-end"},dl={class:"font-light"},cl={class:"uppercase"},pl={class:"font-semibold text-lg first-letter:uppercase pb-0"},Vl={__name:"survey",setup(t){const c=new Be,p=new Se,g=Fe(),l=Ne(),a=_(null),d=_(null),v=_(null),s=_(null),f=_({show:!1,text:"null",type:"success"}),m=_({section:null,topic:null}),w=_({section:null,topic:null}),D=_({section:null,topic:null}),E=_(!1),h=_(!1),x=U=>{f.value=U,setTimeout(()=>{f.value=!1},1500)},i=()=>{window.scroll({top:80,left:0,behavior:"smooth"})},R=async()=>{h.value=!0,await p.finishSurvey(a.value.id)&&(a.value.hasFinished="true"),h.value=!1},k=async U=>{h.value=!0;let T=await z(U.id);T.length>0&&await g.setPositions(a.value.id,U.id,T[0].id)&&(a.value.topic=U.id,a.value.section=T[0].id,v.value=T,await n(a.value),s.value=await r(m.value.section.id)),h.value=!1},V=async U=>{h.value=!0;let T=await r(U.id);T.length>0&&await g.setPositions(a.value.id,m.value.topic.id,U.id)&&(a.value.section=U.id,await n(a.value),s.value=T),h.value=!1},q=async U=>await p.getTopics(U),z=async U=>await p.getSections(U),r=async U=>await p.getQuestions(U),u=(U,T)=>{let Q=T.findIndex(Z=>U.id===Z.id);return Q!==-1&&T.length!==Q+1&&T.findIndex(H=>{var X;return((X=T[Q+1])==null?void 0:X.id)===H.id})!==-1?T[Q+1]:null},e=(U,T)=>{let Q=T.findIndex(Z=>U.id===Z.id);return Q!==-1&&Q!==0&&T.findIndex(H=>{var X;return((X=T[Q-1])==null?void 0:X.id)===H.id})!==-1?T[Q-1]:null},y=async U=>{m.value.section=v.value.find(T=>T.id===U.section),m.value.topic=d.value.find(T=>T.id===U.topic)},S=async()=>{w.value.topic=u(m.value.topic,d.value),w.value.section=u(m.value.section,v.value)},C=async()=>{D.value.topic=e(m.value.topic,d.value),D.value.section=e(m.value.section,v.value)},n=async U=>{await y(U),await S(),await C()},ue=async()=>{a.value=await p.getSurvey(l.params.id),a.value?a.value.topic&&a.value.section?(d.value=await q(a.value.id),v.value=await z(a.value.topic),s.value=await r(a.value.section),await n(a.value)):(c.back(),g.cont++):c.push({name:"home"})};return(async()=>{E.value=!0,await ue(),E.value=!1})(),(U,T)=>(b(),$(Le,null,{default:F(()=>{var Q,Z;return[P(qe,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:F(()=>[f.value.show?(b(),$(A(Me),{key:0,class:le(["fixed top-4 right-2 z-20 shadow-lg border rounded",f.value.type==="success"?"border-green-200":"border-red-200"]),type:f.value.type,translate:"yes",transition:"left",divide:""},{default:F(()=>[G(I(f.value.text),1)]),_:1},8,["class","type"])):J("",!0)]),_:1}),E.value?(b(),j(M,{key:0},[E.value?(b(),$(Ve,{key:0})):J("",!0)],64)):(b(),j(M,{key:1},[o("div",Va,[P(He,null,{activator:F(({modal:H})=>[P(A(W),{onClick:H,color:"dark"},{default:F(()=>[_a]),_:2},1032,["onClick"])]),content:F(()=>[P(_e,{changeTopic:k,topics:d.value,current:m.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),_:1})]),o("h2",Sa,I(a.value.title),1),o("div",Ra,[P(A(ze),{type:"info",class:"col-span-4",ref:"alert"},{default:F(()=>[ka,Oa,Ia]),_:1},512),o("div",Ca,[P(_e,{class:"sticky top-2",changeTopic:k,topics:d.value,current:m.value.topic,isCompleted:a.value.hasFinished==="true"},null,8,["topics","current","isCompleted"])]),o("div",Da,[o("h2",$a,I((Q=m.value.topic)==null?void 0:Q.title),1),o("p",Ta,[Ua,G(" "+I((Z=m.value.section)==null?void 0:Z.title),1)]),v.value?(b(),j(M,{key:1},[h.value?(b(),$(Ve,{key:0})):(b(),$(wa,{key:1,questions:s.value,section:m.value.section,onOnSuccess:x,onOnFaild:x},{footer:F(({submit:H})=>[o("div",Ea,[o("div",Aa,[D.value.section&&a.value.hasFinished==="true"?(b(),$(A(W),{key:0,class:"w-full",onClick:T[0]||(T[0]=async()=>{await V(D.value.section),i()})},{default:F(()=>[o("div",ja,[Ba,o("div",Fa,[Na,o("h4",La,I(D.value.section.title),1)])])]),_:1})):(b(),j(M,{key:1},[D.value.topic&&a.value.hasFinished==="true"?(b(),$(A(W),{key:0,color:"light",onClick:T[1]||(T[1]=async()=>{await k(D.value.topic),i()}),class:"w-full"},{default:F(()=>[o("div",Ma,[qa,o("div",za,[Qa,o("h4",Ka,I(D.value.topic.title),1)])])]),_:1})):J("",!0)],64))]),o("div",Ga,[w.value.section?(b(),$(A(W),{key:0,onClick:async()=>{await H()&&(await V(w.value.section),i())},class:"w-full"},{default:F(()=>[o("div",Ha,[o("div",Xa,[o("p",Ya,[G(" Guardar ("),o("small",Za,I(m.value.section.title),1),G(") ")]),o("h4",Ja,I(w.value.section.title),1)]),Wa])]),_:2},1032,["onClick"])):(b(),j(M,{key:1},[w.value.topic!==null?(b(),$(A(W),{key:0,color:"light",onClick:async()=>{await H()&&(await k(w.value.topic),i())},class:"w-full"},{default:F(()=>[o("div",el,[o("div",tl,[o("p",al,[G(" Guardar ("),o("small",ll,I(m.value.section.title),1),G(") ")]),o("h4",ol,I(w.value.topic.title),1)]),il])]),_:2},1032,["onClick"])):(b(),j(M,{key:1},[a.value.hasFinished==="false"?(b(),$(A(W),{key:0,color:"green",onClick:async()=>{await H()&&(await R(),i())},class:"w-full"},{default:F(()=>[sl]),_:2},1032,["onClick"])):(b(),$(A(W),{key:1,onClick:async()=>{await H()&&i()},class:"w-full"},{default:F(()=>[o("div",nl,[o("div",rl,[o("div",ul,[o("p",dl,[G(" Guardar ("),o("small",cl,I(m.value.section.title),1),G(") ")]),o("h4",pl,I(m.value.section.title),1)])])])]),_:2},1032,["onClick"]))],64))],64))])])]),_:1},8,["questions","section"]))],64)):(b(),j("h4",Pa," no hay secciones "))])])],64))]}),_:1}))}};export{Vl as default};
